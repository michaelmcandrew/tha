<?php/* +--------------------------------------------------------------------+ | CiviCRM version 3.3                                                | +--------------------------------------------------------------------+ | Copyright CiviCRM LLC (c) 2004-2010                                | +--------------------------------------------------------------------+ | This file is a part of CiviCRM.                                    | |                                                                    | | CiviCRM is free software; you can copy, modify, and distribute it  | | under the terms of the GNU Affero General Public License           | | Version 3, 19 November 2007 and the CiviCRM Licensing Exception.   | |                                                                    | | CiviCRM is distributed in the hope that it will be useful, but     | | WITHOUT ANY WARRANTY; without even the implied warranty of         | | MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.               | | See the GNU Affero General Public License for more details.        | |                                                                    | | You should have received a copy of the GNU Affero General Public   | | License and the CiviCRM Licensing Exception along                  | | with this program; if not, contact CiviCRM LLC                     | | at info[AT]civicrm[DOT]org. If you have questions about the        | | GNU Affero General Public License or the licensing of CiviCRM,     | | see the CiviCRM license FAQ at http://civicrm.org/licensing        | +--------------------------------------------------------------------+*//** * * @package CRM * @copyright CiviCRM LLC (c) 2004-2010 * $Id: civicrm_mtl_events.module,v 1.263.2.4 2011/01/13 15:12:10 goba Exp $ * Author: rajesh@millertech.co.uk * Date: 13 Jan 2010 */ function civicrm_helplines_events_civicrm_config( &$config ) {    $template =& CRM_Core_Smarty::singleton( );        $batchingRoot = dirname( __FILE__ );             $batchingDir = $batchingRoot . DIRECTORY_SEPARATOR . 'templates';        if ( is_array( $template->template_dir ) ) {        array_unshift( $template->template_dir, $batchingDir );    } else {        $template->template_dir = array( $batchingDir, $template->template_dir );    }        // also fix php include path    $include_path = $batchingRoot . PATH_SEPARATOR . get_include_path( );    set_include_path( $include_path );}  function civicrm_helplines_events_civicrm_buildForm ( $formName, &$form ) {    if ($formName == 'CRM_Event_Form_Registration_Register') {        //$checkedVal =  $form->_submitValues['same_as_delegate'];        //if ($checkedVal == 1)        //    $form->assign('same_as_delegate_checked' , 'CHECKED');        //else        //    $form->assign('same_as_delegate_checked' , '');                 if ( $form->elementExists( 'additional_participants' ) ) {         $elements = & $form->getElement('additional_participants');         $options = & $elements->_options;         foreach ($options as $sleutel=>$optie) {            if ( $optie['attr']['value'] == 9) {               unset($options[$sleutel]);            }		       if ( $optie['attr']['value'] == 8) {               unset($options[$sleutel]);            }			if ( $optie['attr']['value'] == 7) {               unset($options[$sleutel]);            }			if ( $optie['attr']['value'] == 6) {               unset($options[$sleutel]);            }			if ( $optie['attr']['value'] == 5) {               unset($options[$sleutel]);            }			if ( $optie['attr']['value'] == 4) {               unset($options[$sleutel]);            }			if ( $optie['attr']['value'] == 3) {               unset($options[$sleutel]);            }         }      };	};	if ($formName == 'CRM_Event_Form_Registration_AdditionalParticipant') {	//dpm($form);	//dpm($_SESSION);	$keycon = $form->controller;	$key = $keycon->_key;	$key2 = 'CRM_Event_Controller_Registration_'.$key;	$key3 = '_CRM_Event_Controller_Registration_'.$key.'_container';	//dpm($key2);	//dpm($_SESSION);	$pricefield = reset(reset($_SESSION['CiviCRM'][$key2]['priceSet']['fields']));	$pricefield2 = 'price_'.$pricefield;	//dpm($pricefield2);	$a = $_SESSION[$key3];	//dpm($a);	$aa = $a['values']['Register'][$pricefield2];	//dpm($aa);	//dpm($form);	//dpm($pricefield2);	$elements = & $form->getElement($pricefield2);	$elements->setValue($aa);	//dpm($form);	$ab = $a['values']['Register']['custom_372'];	$elements = & $form->getElement('custom_440');	$elements->setValue($ab);	//dpm($form);	}}